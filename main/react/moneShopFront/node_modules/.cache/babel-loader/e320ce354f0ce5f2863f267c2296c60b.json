{"ast":null,"code":"var _jsxFileName = \"/Users/jangwooseok/Desktop/hecto_proj/MoneShop/main/react/moneShopFront/src/pages/ShoppingCart.js\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { removeFromCart, setQuantity, notify } from \"../actions\";\nimport CartItem from \"../components/CartItem\";\nimport OrderSummary from \"../components/OrderSummary\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ShoppingCart() {\n  _s();\n\n  const state = useSelector(state => state.itemReducer);\n  const {\n    cartItems,\n    items,\n    user\n  } = state;\n  const dispatch = useDispatch();\n  const [checkedItems, setCheckedItems] = useState(cartItems.map(el => el.itemId));\n\n  const handleCheckChange = (checked, id) => {\n    if (checked) {\n      setCheckedItems([...checkedItems, id]);\n    } else {\n      setCheckedItems(checkedItems.filter(el => el !== id));\n    }\n  };\n\n  const handleAllCheck = checked => {\n    if (checked) {\n      setCheckedItems(cartItems.map(el => el.itemId));\n    } else {\n      setCheckedItems([]);\n    }\n  };\n\n  const handleQuantityChange = (quantity, itemId) => {\n    dispatch(setQuantity(itemId, quantity));\n  };\n\n  const handleDelete = itemId => {\n    axios.post(\"http://localhost:9001/deleteOne\", {\n      method: \"POST\",\n      body: {\n        mid: user.id,\n        pno: itemId\n      }\n    }).then(resp => {\n      const {\n        result\n      } = resp.data;\n\n      if (result !== \"-1+\") {\n        setCheckedItems(checkedItems.filter(el => el !== itemId));\n        dispatch(removeFromCart(itemId));\n      }\n    }).catch(err => {\n      dispatch(notify(`상품 삭제에 실패했습니다.`));\n    });\n  };\n\n  const getTotal = () => {\n    let cartIdArr = cartItems.map(el => el.itemId);\n    let total = {\n      price: 0,\n      quantity: 0\n    };\n\n    for (let i = 0; i < cartIdArr.length; i++) {\n      if (checkedItems.indexOf(cartIdArr[i]) > -1) {\n        let quantity = cartItems[i].quantity;\n        let price = items.filter(el => el.id === cartItems[i].itemId)[0].price;\n        total.price = total.price + quantity * price;\n        total.quantity = total.quantity + quantity;\n      }\n    }\n\n    return total;\n  };\n\n  const renderItems = items.filter(el => cartItems.map(el => el.itemId).indexOf(el.id) > -1);\n  const total = getTotal();\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"item-list-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      id: \"item-list-body\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"item-list-title\",\n        children: \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        id: \"shopping-cart-select-all\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          checked: checkedItems.length === cartItems.length ? true : false,\n          onChange: e => handleAllCheck(e.target.checked)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"label\", {\n          children: \"\\uC804\\uCCB4\\uC120\\uD0DD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        id: \"shopping-cart-container\",\n        children: [!cartItems.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"item-list-text\",\n          children: \"\\uC7A5\\uBC14\\uAD6C\\uB2C8\\uC5D0 \\uC544\\uC774\\uD15C\\uC774 \\uC5C6\\uC2B5\\uB2C8\\uB2E4.\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n          id: \"cart-item-list\",\n          children: renderItems.map((item, idx) => {\n            const quantity = cartItems.filter(el => el.itemId === item.id)[0].quantity;\n            return /*#__PURE__*/_jsxDEV(CartItem, {\n              handleCheckChange: handleCheckChange,\n              handleQuantityChange: handleQuantityChange,\n              handleDelete: handleDelete,\n              item: item,\n              checkedItems: checkedItems,\n              quantity: quantity\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 103,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(OrderSummary, {\n          total: total.price,\n          totalQty: total.quantity\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 116,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 82,\n    columnNumber: 5\n  }, this);\n}\n\n_s(ShoppingCart, \"+DmS8yZeOv0tqPFBGiM0TV8E9n4=\", false, function () {\n  return [useSelector, useDispatch];\n});\n\n_c = ShoppingCart;\n\nvar _c;\n\n$RefreshReg$(_c, \"ShoppingCart\");","map":{"version":3,"names":["axios","React","useState","useDispatch","useSelector","removeFromCart","setQuantity","notify","CartItem","OrderSummary","ShoppingCart","state","itemReducer","cartItems","items","user","dispatch","checkedItems","setCheckedItems","map","el","itemId","handleCheckChange","checked","id","filter","handleAllCheck","handleQuantityChange","quantity","handleDelete","post","method","body","mid","pno","then","resp","result","data","catch","err","getTotal","cartIdArr","total","price","i","length","indexOf","renderItems","e","target","item","idx"],"sources":["/Users/jangwooseok/Desktop/hecto_proj/MoneShop/main/react/moneShopFront/src/pages/ShoppingCart.js"],"sourcesContent":["import axios from \"axios\";\nimport React, { useState } from \"react\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport { removeFromCart, setQuantity, notify } from \"../actions\";\nimport CartItem from \"../components/CartItem\";\nimport OrderSummary from \"../components/OrderSummary\";\n\nexport default function ShoppingCart() {\n  const state = useSelector((state) => state.itemReducer);\n  const { cartItems, items, user } = state;\n  const dispatch = useDispatch();\n  const [checkedItems, setCheckedItems] = useState(\n    cartItems.map((el) => el.itemId)\n  );\n\n  const handleCheckChange = (checked, id) => {\n    if (checked) {\n      setCheckedItems([...checkedItems, id]);\n    } else {\n      setCheckedItems(checkedItems.filter((el) => el !== id));\n    }\n  };\n\n  const handleAllCheck = (checked) => {\n    if (checked) {\n      setCheckedItems(cartItems.map((el) => el.itemId));\n    } else {\n      setCheckedItems([]);\n    }\n  };\n\n  const handleQuantityChange = (quantity, itemId) => {\n    dispatch(setQuantity(itemId, quantity));\n  };\n\n  const handleDelete = (itemId) => {\n    axios\n      .post(\"http://localhost:9001/deleteOne\", {\n        method: \"POST\",\n        body: {\n          mid: user.id,\n          pno: itemId,\n        },\n      })\n      .then((resp) => {\n        const { result } = resp.data;\n        if (result !== \"-1+\") {\n          setCheckedItems(checkedItems.filter((el) => el !== itemId));\n          dispatch(removeFromCart(itemId));\n        }\n      })\n      .catch((err) => {\n        dispatch(notify(`상품 삭제에 실패했습니다.`));\n      });\n  };\n\n  const getTotal = () => {\n    let cartIdArr = cartItems.map((el) => el.itemId);\n    let total = {\n      price: 0,\n      quantity: 0,\n    };\n    for (let i = 0; i < cartIdArr.length; i++) {\n      if (checkedItems.indexOf(cartIdArr[i]) > -1) {\n        let quantity = cartItems[i].quantity;\n        let price = items.filter((el) => el.id === cartItems[i].itemId)[0]\n          .price;\n\n        total.price = total.price + quantity * price;\n        total.quantity = total.quantity + quantity;\n      }\n    }\n    return total;\n  };\n\n  const renderItems = items.filter(\n    (el) => cartItems.map((el) => el.itemId).indexOf(el.id) > -1\n  );\n  const total = getTotal();\n\n  return (\n    <div id=\"item-list-container\">\n      <div id=\"item-list-body\">\n        <div id=\"item-list-title\">장바구니</div>\n        <span id=\"shopping-cart-select-all\">\n          <input\n            type=\"checkbox\"\n            checked={checkedItems.length === cartItems.length ? true : false}\n            onChange={(e) => handleAllCheck(e.target.checked)}\n          ></input>\n          <label>전체선택</label>\n        </span>\n        <div id=\"shopping-cart-container\">\n          {!cartItems.length ? (\n            <div id=\"item-list-text\">장바구니에 아이템이 없습니다.</div>\n          ) : (\n            <div id=\"cart-item-list\">\n              {renderItems.map((item, idx) => {\n                const quantity = cartItems.filter(\n                  (el) => el.itemId === item.id\n                )[0].quantity;\n                return (\n                  <CartItem\n                    key={idx}\n                    handleCheckChange={handleCheckChange}\n                    handleQuantityChange={handleQuantityChange}\n                    handleDelete={handleDelete}\n                    item={item}\n                    checkedItems={checkedItems}\n                    quantity={quantity}\n                  />\n                );\n              })}\n            </div>\n          )}\n          <OrderSummary total={total.price} totalQty={total.quantity} />\n        </div>\n      </div>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}